<svg width="900" height="500" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="500" fill="#0A0A0A"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" fill="#E5E7EB" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="600">
    ACTP Transaction Lifecycle
  </text>

  <!-- State nodes - Row 1 -->
  <!-- INITIATED -->
  <rect x="30" y="80" width="120" height="50" rx="8" fill="#1F2937" stroke="#3B82F6" stroke-width="2"/>
  <text x="90" y="110" text-anchor="middle" fill="#E5E7EB" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="500">INITIATED</text>
  <text x="100" y="145" text-anchor="start" fill="#6B7280" font-family="system-ui, -apple-system, sans-serif" font-size="10">Created</text>

  <!-- QUOTED (optional) -->
  <rect x="200" y="80" width="120" height="50" rx="8" fill="#1F2937" stroke="#8B5CF6" stroke-width="2" stroke-dasharray="4,2"/>
  <text x="260" y="110" text-anchor="middle" fill="#E5E7EB" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="500">QUOTED</text>
  <text x="270" y="145" text-anchor="start" fill="#8B5CF6" font-family="system-ui, -apple-system, sans-serif" font-size="10">Optional</text>

  <!-- COMMITTED -->
  <rect x="370" y="80" width="120" height="50" rx="8" fill="#1F2937" stroke="#F59E0B" stroke-width="2"/>
  <text x="430" y="110" text-anchor="middle" fill="#E5E7EB" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="500">COMMITTED</text>
  <text x="440" y="145" text-anchor="start" fill="#6B7280" font-family="system-ui, -apple-system, sans-serif" font-size="10">Escrow Locked</text>

  <!-- IN_PROGRESS -->
  <rect x="540" y="80" width="120" height="50" rx="8" fill="#1F2937" stroke="#06B6D4" stroke-width="2"/>
  <text x="600" y="110" text-anchor="middle" fill="#E5E7EB" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="500">IN_PROGRESS</text>
  <text x="550" y="145" text-anchor="start" fill="#6B7280" font-family="system-ui, -apple-system, sans-serif" font-size="10">Working</text>

  <!-- DELIVERED -->
  <rect x="710" y="80" width="120" height="50" rx="8" fill="#1F2937" stroke="#10B981" stroke-width="2"/>
  <text x="770" y="110" text-anchor="middle" fill="#E5E7EB" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="500">DELIVERED</text>
  <text x="780" y="145" text-anchor="start" fill="#6B7280" font-family="system-ui, -apple-system, sans-serif" font-size="10">Proof Submitted</text>

  <!-- State nodes - Row 2 (Terminal states) -->
  <!-- SETTLED -->
  <rect x="600" y="220" width="140" height="55" rx="8" fill="#059669" stroke="#10B981" stroke-width="2"/>
  <text x="670" y="252" text-anchor="middle" fill="#FFFFFF" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="600">SETTLED</text>
  <text x="660" y="290" text-anchor="end" fill="#6B7280" font-family="system-ui, -apple-system, sans-serif" font-size="10">Payment Released</text>

  <!-- DISPUTED -->
  <rect x="710" y="320" width="120" height="50" rx="8" fill="#1F2937" stroke="#EF4444" stroke-width="2"/>
  <text x="770" y="350" text-anchor="middle" fill="#E5E7EB" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="500">DISPUTED</text>
  <text x="770" y="385" text-anchor="middle" fill="#6B7280" font-family="system-ui, -apple-system, sans-serif" font-size="10">Mediation Required</text>

  <!-- CANCELLED -->
  <rect x="160" y="320" width="140" height="55" rx="8" fill="#7F1D1D" stroke="#EF4444" stroke-width="2"/>
  <text x="230" y="352" text-anchor="middle" fill="#FFFFFF" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="600">CANCELLED</text>
  <text x="230" y="390" text-anchor="middle" fill="#6B7280" font-family="system-ui, -apple-system, sans-serif" font-size="10">Refund Processed</text>

  <!-- Arrows - Happy Path -->
  <!-- INITIATED → QUOTED -->
  <line x1="150" y1="105" x2="195" y2="105" stroke="#10B981" stroke-width="2" marker-end="url(#arrowGreen)"/>

  <!-- QUOTED → COMMITTED -->
  <line x1="320" y1="105" x2="365" y2="105" stroke="#10B981" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="343" y="70" text-anchor="middle" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="9">linkEscrow()</text>

  <!-- COMMITTED → IN_PROGRESS -->
  <line x1="490" y1="105" x2="535" y2="105" stroke="#10B981" stroke-width="2" marker-end="url(#arrowGreen)"/>

  <!-- IN_PROGRESS → DELIVERED -->
  <line x1="660" y1="105" x2="705" y2="105" stroke="#10B981" stroke-width="2" marker-end="url(#arrowGreen)"/>

  <!-- DELIVERED → SETTLED -->
  <path d="M 770 130 L 770 170 L 700 170 L 700 215" fill="none" stroke="#10B981" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="690" y="185" text-anchor="end" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="9">releaseEscrow()</text>

  <!-- DELIVERED → DISPUTED -->
  <line x1="770" y1="130" x2="770" y2="315" stroke="#EF4444" stroke-width="2" marker-end="url(#arrowRed)"/>
  <text x="785" y="225" fill="#EF4444" font-family="system-ui, -apple-system, sans-serif" font-size="9">dispute()</text>

  <!-- DISPUTED → SETTLED -->
  <path d="M 710 345 L 670 345 L 670 280" fill="none" stroke="#10B981" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="650" y="320" text-anchor="end" fill="#6B7280" font-family="system-ui, -apple-system, sans-serif" font-size="9">resolveDispute()</text>

  <!-- Cancel arrows -->
  <!-- INITIATED → CANCELLED -->
  <path d="M 90 130 L 90 347 L 155 347" fill="none" stroke="#EF4444" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrowRed)"/>

  <!-- QUOTED → CANCELLED -->
  <path d="M 260 130 L 260 347 L 305 347" fill="none" stroke="#EF4444" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrowRed)"/>

  <!-- COMMITTED → CANCELLED -->
  <path d="M 430 130 L 430 300 L 305 300 L 305 347" fill="none" stroke="#EF4444" stroke-width="1.5" stroke-dasharray="4,2"/>

  <!-- IN_PROGRESS → CANCELLED -->
  <path d="M 540 130 L 520 280 L 305 280 L 305 315" fill="none" stroke="#EF4444" stroke-width="1.5" stroke-dasharray="4,2"/>

  <!-- Legend -->
  <rect x="30" y="420" width="840" height="65" rx="8" fill="#111827"/>

  <text x="50" y="445" fill="#9CA3AF" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="500">Legend:</text>

  <!-- Happy path -->
  <line x1="120" y1="440" x2="160" y2="440" stroke="#10B981" stroke-width="2"/>
  <text x="170" y="444" fill="#9CA3AF" font-family="system-ui, -apple-system, sans-serif" font-size="10">Happy Path</text>

  <!-- Optional -->
  <line x1="270" y1="440" x2="310" y2="440" stroke="#8B5CF6" stroke-width="2" stroke-dasharray="4,2"/>
  <text x="320" y="444" fill="#9CA3AF" font-family="system-ui, -apple-system, sans-serif" font-size="10">Optional State</text>

  <!-- Dispute -->
  <line x1="430" y1="440" x2="470" y2="440" stroke="#EF4444" stroke-width="2"/>
  <text x="480" y="444" fill="#9CA3AF" font-family="system-ui, -apple-system, sans-serif" font-size="10">Dispute Path</text>

  <!-- Cancel -->
  <line x1="580" y1="440" x2="620" y2="440" stroke="#EF4444" stroke-width="1.5" stroke-dasharray="4,2"/>
  <text x="630" y="444" fill="#9CA3AF" font-family="system-ui, -apple-system, sans-serif" font-size="10">Cancel Path</text>

  <!-- Terminal -->
  <rect x="730" y="432" width="16" height="16" rx="3" fill="#059669"/>
  <text x="755" y="444" fill="#9CA3AF" font-family="system-ui, -apple-system, sans-serif" font-size="10">Terminal State</text>

  <!-- Subtitle in legend -->
  <text x="450" y="470" text-anchor="middle" fill="#6B7280" font-family="system-ui, -apple-system, sans-serif" font-size="10">
    All transitions are one-way and enforced by ACTPKernel smart contract
  </text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4B5563"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#3B82F6"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#10B981"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#EF4444"/>
    </marker>
  </defs>
</svg>