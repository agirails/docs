<svg viewBox="0 0 900 450" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
  <!-- Background -->
  <rect width="900" height="450" fill="#0A0A0A"/>

  <!-- Initial state [*] -->
  <circle cx="50" cy="260" r="14" fill="#6B7280"/>
  <circle cx="50" cy="260" r="7" fill="#0A0A0A"/>

  <!-- Arrow: [*] → Created -->
  <line x1="68" y1="260" x2="130" y2="260" stroke="#6B7280" stroke-width="2"/>
  <polygon points="135,260 127,255 127,265" fill="#6B7280"/>
  <rect x="35" y="282" width="100" height="20" rx="4" fill="#0EA5E9" fill-opacity="0.2" stroke="#0EA5E9" stroke-width="1"/>
  <text x="85" y="296" text-anchor="middle" fill="#0EA5E9" font-family="system-ui, -apple-system, sans-serif" font-size="9">createEscrow()</text>

  <!-- State: Created (x=140) -->
  <rect x="140" y="225" width="150" height="70" rx="12" fill="#0EA5E9" fill-opacity="0.15" stroke="#0EA5E9" stroke-width="2"/>
  <text x="215" y="265" text-anchor="middle" fill="#0EA5E9" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="600">Created</text>

  <!-- Note for Created -->
  <rect x="145" y="320" width="140" height="50" rx="6" fill="#1F2937" stroke="#4B5563" stroke-width="1"/>
  <text x="215" y="342" text-anchor="middle" fill="#9CA3AF" font-family="monospace" font-size="10">amount = 1000</text>
  <text x="215" y="360" text-anchor="middle" fill="#9CA3AF" font-family="monospace" font-size="10">released = 0</text>
  <line x1="215" y1="295" x2="215" y2="320" stroke="#4B5563" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- State: PartialRelease (centered between Created and FullyReleased, x=375) -->
  <rect x="375" y="70" width="150" height="70" rx="12" fill="#F59E0B" fill-opacity="0.15" stroke="#F59E0B" stroke-width="2"/>
  <text x="450" y="110" text-anchor="middle" fill="#F59E0B" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="600">PartialRelease</text>

  <!-- Self-loop: PartialRelease → PartialRelease (centered on box) -->
  <path d="M 430 70 C 430 20, 470 20, 470 70" stroke="#F59E0B" stroke-width="2" fill="none"/>
  <polygon points="470,70 465,60 475,60" fill="#F59E0B"/>
  <!-- Label above the curved arrow -->
  <rect x="400" y="5" width="100" height="20" rx="4" fill="#F59E0B" fill-opacity="0.2" stroke="#F59E0B" stroke-width="1"/>
  <text x="450" y="19" text-anchor="middle" fill="#F59E0B" font-family="system-ui, -apple-system, sans-serif" font-size="9">releaseMilestone()</text>

  <!-- Note for PartialRelease (horizontally aligned with PartialRelease) -->
  <rect x="555" y="80" width="140" height="50" rx="6" fill="#1F2937" stroke="#4B5563" stroke-width="1"/>
  <text x="625" y="102" text-anchor="middle" fill="#9CA3AF" font-family="monospace" font-size="10">amount = 1000</text>
  <text x="625" y="120" text-anchor="middle" fill="#9CA3AF" font-family="monospace" font-size="10">released = 400</text>
  <line x1="525" y1="105" x2="555" y2="105" stroke="#4B5563" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Arrow: Created → PartialRelease -->
  <line x1="295" y1="235" x2="370" y2="145" stroke="#8B5CF6" stroke-width="2"/>
  <polygon points="375,140 365,142 368,150" fill="#8B5CF6"/>
  <!-- Label to the left of arrow -->
  <rect x="220" y="170" width="100" height="20" rx="4" fill="#8B5CF6" fill-opacity="0.2" stroke="#8B5CF6" stroke-width="1"/>
  <text x="270" y="184" text-anchor="middle" fill="#8B5CF6" font-family="system-ui, -apple-system, sans-serif" font-size="9">releaseMilestone()</text>

  <!-- Arrow: PartialRelease → FullyReleased -->
  <line x1="530" y1="145" x2="605" y2="235" stroke="#10B981" stroke-width="2"/>
  <polygon points="610,240 600,233 607,227" fill="#10B981"/>
  <!-- Label to the right of arrow -->
  <rect x="580" y="170" width="80" height="20" rx="4" fill="#10B981" fill-opacity="0.2" stroke="#10B981" stroke-width="1"/>
  <text x="620" y="184" text-anchor="middle" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="9">settle (SETTLED)</text>

  <!-- Arrow: Created → FullyReleased (direct) -->
  <line x1="295" y1="275" x2="605" y2="275" stroke="#10B981" stroke-width="2"/>
  <polygon points="610,275 602,270 602,280" fill="#10B981"/>
  <rect x="395" y="285" width="90" height="20" rx="4" fill="#10B981" fill-opacity="0.2" stroke="#10B981" stroke-width="1"/>
  <text x="440" y="299" text-anchor="middle" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="9">settle (SETTLED)</text>

  <!-- State: FullyReleased (x=610) -->
  <rect x="610" y="225" width="160" height="70" rx="12" fill="#10B981" fill-opacity="0.15" stroke="#10B981" stroke-width="2"/>
  <text x="690" y="265" text-anchor="middle" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="600">FullyReleased</text>

  <!-- Note for FullyReleased -->
  <rect x="615" y="320" width="150" height="50" rx="6" fill="#1F2937" stroke="#4B5563" stroke-width="1"/>
  <text x="690" y="342" text-anchor="middle" fill="#9CA3AF" font-family="monospace" font-size="10">amount = 1000</text>
  <text x="690" y="360" text-anchor="middle" fill="#9CA3AF" font-family="monospace" font-size="10">released = 1000</text>
  <line x1="690" y1="295" x2="690" y2="320" stroke="#4B5563" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Arrow: FullyReleased → [*] -->
  <line x1="775" y1="260" x2="820" y2="260" stroke="#6B7280" stroke-width="2"/>
  <polygon points="825,260 817,255 817,265" fill="#6B7280"/>

  <!-- Final state [*] -->
  <circle cx="845" cy="260" r="14" fill="#6B7280"/>
  <circle cx="845" cy="260" r="9" fill="#0A0A0A"/>
  <circle cx="845" cy="260" r="5" fill="#6B7280"/>
</svg>
