<svg viewBox="0 0 780 150" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
  <!-- Background -->
  <rect width="780" height="150" fill="#0A0A0A"/>

  <!-- Row 1: Create & Fund → Wait 5 min → Get Transaction → IF: state == DELIVERED -->

  <!-- Node: Create & Fund -->
  <rect x="25" y="25" width="135" height="40" rx="6" fill="#0A0A0A" stroke="#FF6D5A" stroke-width="2"/>
  <text x="92" y="51" text-anchor="middle" fill="#FECACA" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600">Create &amp; Fund</text>

  <line x1="160" y1="45" x2="188" y2="45" stroke="#FF6D5A" stroke-width="2"/>
  <polygon points="188,45 180,40 180,50" fill="#FF6D5A"/>

  <!-- Node: Wait 5 min -->
  <rect x="195" y="25" width="110" height="40" rx="6" fill="#0A0A0A" stroke="#8B5CF6" stroke-width="2"/>
  <text x="250" y="51" text-anchor="middle" fill="#C4B5FD" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600">Wait 5 min</text>

  <line x1="305" y1="45" x2="333" y2="45" stroke="#FF6D5A" stroke-width="2"/>
  <polygon points="333,45 325,40 325,50" fill="#FF6D5A"/>

  <!-- Node: Get Transaction -->
  <rect x="340" y="25" width="140" height="40" rx="6" fill="#0A0A0A" stroke="#10B981" stroke-width="2"/>
  <text x="410" y="51" text-anchor="middle" fill="#6EE7B7" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600">Get Transaction</text>

  <line x1="480" y1="45" x2="508" y2="45" stroke="#FF6D5A" stroke-width="2"/>
  <polygon points="508,45 500,40 500,50" fill="#FF6D5A"/>

  <!-- Node: IF: state == DELIVERED -->
  <rect x="515" y="25" width="175" height="40" rx="6" fill="#0A0A0A" stroke="#F59E0B" stroke-width="2"/>
  <text x="602" y="51" text-anchor="middle" fill="#FCD34D" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600">IF: state == DELIVERED</text>

  <!-- Yes path: down to Release Payment -->
  <line x1="602" y1="65" x2="602" y2="88" stroke="#10B981" stroke-width="2"/>
  <polygon points="602,88 597,80 607,80" fill="#10B981"/>
  <text x="622" y="80" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600">yes</text>

  <!-- Node: Release Payment -->
  <rect x="515" y="95" width="175" height="40" rx="6" fill="#10B981" fill-opacity="0.2" stroke="#10B981" stroke-width="2.5"/>
  <text x="602" y="121" text-anchor="middle" fill="#6EE7B7" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="700">Release Payment</text>

  <!-- No path: loop back to Wait 5 min -->
  <!-- From IF down, then left under the row, then up to Wait -->
  <line x1="515" y1="115" x2="250" y2="115" stroke="#EF4444" stroke-width="2" stroke-dasharray="5,4"/>
  <line x1="250" y1="115" x2="250" y2="72" stroke="#EF4444" stroke-width="2" stroke-dasharray="5,4"/>
  <polygon points="250,72 245,80 255,80" fill="#EF4444"/>
  <text x="380" y="128" fill="#EF4444" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600">no (retry)</text>
</svg>
