<svg viewBox="0 0 800 435" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
  <!-- Background -->
  <rect width="800" height="435" fill="#0A0A0A"/>

  <!-- Consumer Agent Box -->
  <rect x="30" y="30" width="320" height="375" rx="12" fill="#10B981" fill-opacity="0.1" stroke="#10B981" stroke-width="2"/>
  <text x="190" y="58" text-anchor="middle" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="700">Consumer Agent</text>

  <!-- Agent Components -->
  <rect x="60" y="80" width="130" height="40" rx="6" fill="#0A0A0A" fill-opacity="0.8" stroke="#10B981" stroke-width="1.5"/>
  <text x="125" y="105" text-anchor="middle" fill="#6EE7B7" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Service Request</text>

  <rect x="60" y="145" width="130" height="40" rx="6" fill="#0A0A0A" fill-opacity="0.8" stroke="#10B981" stroke-width="1.5"/>
  <text x="125" y="170" text-anchor="middle" fill="#6EE7B7" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Escrow Funding</text>

  <rect x="60" y="210" width="130" height="40" rx="6" fill="#0A0A0A" fill-opacity="0.8" stroke="#10B981" stroke-width="1.5"/>
  <text x="125" y="235" text-anchor="middle" fill="#6EE7B7" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Delivery Monitoring</text>

  <rect x="60" y="275" width="130" height="40" rx="6" fill="#0A0A0A" fill-opacity="0.8" stroke="#10B981" stroke-width="1.5"/>
  <text x="125" y="300" text-anchor="middle" fill="#6EE7B7" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Proof Verification</text>

  <rect x="60" y="340" width="130" height="40" rx="6" fill="#0A0A0A" fill-opacity="0.8" stroke="#10B981" stroke-width="1.5"/>
  <text x="125" y="365" text-anchor="middle" fill="#6EE7B7" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Settlement/Dispute</text>

  <!-- Internal arrows with labels -->
  <line x1="125" y1="120" x2="125" y2="145" stroke="#34D399" stroke-width="1.5"/>
  <polygon points="125,145 121,139 129,139" fill="#34D399"/>
  <rect x="135" y="124" width="30" height="16" rx="3" fill="#0A0A0A" fill-opacity="0.9"/>
  <text x="150" y="135" text-anchor="middle" fill="#34D399" font-family="system-ui, -apple-system, sans-serif" font-size="9">fund</text>

  <line x1="125" y1="185" x2="125" y2="210" stroke="#34D399" stroke-width="1.5"/>
  <polygon points="125,210 121,204 129,204" fill="#34D399"/>
  <rect x="135" y="189" width="38" height="16" rx="3" fill="#0A0A0A" fill-opacity="0.9"/>
  <text x="154" y="200" text-anchor="middle" fill="#34D399" font-family="system-ui, -apple-system, sans-serif" font-size="9">watch</text>

  <line x1="125" y1="250" x2="125" y2="275" stroke="#34D399" stroke-width="1.5"/>
  <polygon points="125,275 121,269 129,269" fill="#34D399"/>
  <rect x="135" y="254" width="38" height="16" rx="3" fill="#0A0A0A" fill-opacity="0.9"/>
  <text x="154" y="265" text-anchor="middle" fill="#34D399" font-family="system-ui, -apple-system, sans-serif" font-size="9">verify</text>

  <line x1="125" y1="315" x2="125" y2="340" stroke="#34D399" stroke-width="1.5"/>
  <polygon points="125,340 121,334 129,334" fill="#34D399"/>
  <rect x="135" y="319" width="42" height="16" rx="3" fill="#0A0A0A" fill-opacity="0.9"/>
  <text x="156" y="330" text-anchor="middle" fill="#34D399" font-family="system-ui, -apple-system, sans-serif" font-size="9">decide</text>

  <!-- On-Chain Box -->
  <rect x="450" y="30" width="320" height="375" rx="12" fill="#8B5CF6" fill-opacity="0.1" stroke="#8B5CF6" stroke-width="2"/>
  <text x="610" y="58" text-anchor="middle" fill="#8B5CF6" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="700">On-Chain</text>

  <!-- On-Chain Components -->
  <rect x="545" y="80" width="130" height="40" rx="6" fill="#0A0A0A" fill-opacity="0.8" stroke="#8B5CF6" stroke-width="1.5"/>
  <text x="610" y="105" text-anchor="middle" fill="#C4B5FD" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Transactions</text>

  <rect x="545" y="145" width="130" height="40" rx="6" fill="#0A0A0A" fill-opacity="0.8" stroke="#10B981" stroke-width="1.5"/>
  <text x="610" y="170" text-anchor="middle" fill="#6EE7B7" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Escrow</text>

  <rect x="545" y="210" width="130" height="40" rx="6" fill="#0A0A0A" fill-opacity="0.8" stroke="#8B5CF6" stroke-width="1.5"/>
  <text x="610" y="235" text-anchor="middle" fill="#C4B5FD" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Events</text>

  <rect x="545" y="275" width="130" height="40" rx="6" fill="#0A0A0A" fill-opacity="0.8" stroke="#F59E0B" stroke-width="1.5"/>
  <text x="610" y="293" text-anchor="middle" fill="#FCD34D" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Attestations</text>
  <text x="610" y="307" text-anchor="middle" fill="#FCD34D" font-family="system-ui, -apple-system, sans-serif" font-size="9">(EAS)</text>

  <!-- Cross-box Arrows -->

  <!-- Service Request → Transactions (createTransaction) -->
  <path d="M190 100 L545 100" stroke="#A78BFA" stroke-width="1.5" fill="none" marker-end="url(#arrowPurple)"/>
  <rect x="320" y="88" width="90" height="16" rx="3" fill="#0A0A0A" fill-opacity="0.9"/>
  <text x="365" y="99" text-anchor="middle" fill="#A78BFA" font-family="system-ui, -apple-system, sans-serif" font-size="9">createTransaction</text>

  <!-- Escrow Funding → Escrow (fundTransaction) -->
  <path d="M190 165 L545 165" stroke="#10B981" stroke-width="1.5" fill="none" marker-end="url(#arrowGreen)"/>
  <rect x="320" y="153" width="85" height="16" rx="3" fill="#0A0A0A" fill-opacity="0.9"/>
  <text x="362" y="164" text-anchor="middle" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="9">fundTransaction</text>

  <!-- Events → Delivery Monitoring (state changes) -->
  <path d="M545 230 L190 230" stroke="#A78BFA" stroke-width="1.5" fill="none" marker-end="url(#arrowPurple)"/>
  <rect x="330" y="218" width="75" height="16" rx="3" fill="#0A0A0A" fill-opacity="0.9"/>
  <text x="367" y="229" text-anchor="middle" fill="#A78BFA" font-family="system-ui, -apple-system, sans-serif" font-size="9">state changes</text>

  <!-- Attestations → Proof Verification (verify) -->
  <path d="M545 295 L190 295" stroke="#F59E0B" stroke-width="1.5" fill="none" marker-end="url(#arrowAmber)"/>
  <rect x="350" y="283" width="40" height="16" rx="3" fill="#0A0A0A" fill-opacity="0.9"/>
  <text x="370" y="294" text-anchor="middle" fill="#F59E0B" font-family="system-ui, -apple-system, sans-serif" font-size="9">verify</text>

  <!-- Settlement → Escrow (releaseEscrow) -->
  <path d="M190 360 L545 165" stroke="#10B981" stroke-width="1.5" fill="none" marker-end="url(#arrowGreen)"/>
  <rect x="300" y="270" width="80" height="16" rx="3" fill="#0A0A0A" fill-opacity="0.9"/>
  <text x="340" y="281" text-anchor="middle" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="9">releaseEscrow</text>

  <!-- Settlement → Transactions (raiseDispute) - dashed -->
  <path d="M190 360 L545 100" stroke="#EF4444" stroke-width="1.5" fill="none" stroke-dasharray="4,3" marker-end="url(#arrowRed)"/>
  <rect x="300" y="240" width="70" height="16" rx="3" fill="#0A0A0A" fill-opacity="0.9"/>
  <text x="335" y="251" text-anchor="middle" fill="#EF4444" font-family="system-ui, -apple-system, sans-serif" font-size="9">raiseDispute</text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowPurple" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <polygon points="0,0 8,4 0,8" fill="#A78BFA"/>
    </marker>
    <marker id="arrowGreen" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <polygon points="0,0 8,4 0,8" fill="#10B981"/>
    </marker>
    <marker id="arrowAmber" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <polygon points="0,0 8,4 0,8" fill="#F59E0B"/>
    </marker>
    <marker id="arrowRed" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <polygon points="0,0 8,4 0,8" fill="#EF4444"/>
    </marker>
  </defs>
</svg>
