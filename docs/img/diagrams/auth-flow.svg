<svg viewBox="0 0 700 420" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
  <!-- Background -->
  <rect width="700" height="420" fill="#0A0A0A"/>

  <!-- Participant boxes at top -->
  <!-- AI Agent -->
  <rect x="50" y="20" width="100" height="40" rx="8" fill="#0EA5E9" fill-opacity="0.15" stroke="#0EA5E9" stroke-width="2"/>
  <text x="100" y="45" text-anchor="middle" fill="#0EA5E9" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600">AI Agent</text>

  <!-- Wallet -->
  <rect x="200" y="20" width="100" height="40" rx="8" fill="#8B5CF6" fill-opacity="0.15" stroke="#8B5CF6" stroke-width="2"/>
  <text x="250" y="45" text-anchor="middle" fill="#8B5CF6" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600">Wallet</text>

  <!-- Blockchain -->
  <rect x="400" y="20" width="100" height="40" rx="8" fill="#F59E0B" fill-opacity="0.15" stroke="#F59E0B" stroke-width="2"/>
  <text x="450" y="45" text-anchor="middle" fill="#F59E0B" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600">Blockchain</text>

  <!-- ACTPKernel -->
  <rect x="550" y="20" width="100" height="40" rx="8" fill="#10B981" fill-opacity="0.15" stroke="#10B981" stroke-width="2"/>
  <text x="600" y="45" text-anchor="middle" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600">ACTPKernel</text>

  <!-- Vertical lifelines -->
  <line x1="100" y1="60" x2="100" y2="380" stroke="#0EA5E9" stroke-width="1" stroke-dasharray="4,4" stroke-opacity="0.5"/>
  <line x1="250" y1="60" x2="250" y2="380" stroke="#8B5CF6" stroke-width="1" stroke-dasharray="4,4" stroke-opacity="0.5"/>
  <line x1="450" y1="60" x2="450" y2="380" stroke="#F59E0B" stroke-width="1" stroke-dasharray="4,4" stroke-opacity="0.5"/>
  <line x1="600" y1="60" x2="600" y2="380" stroke="#10B981" stroke-width="1" stroke-dasharray="4,4" stroke-opacity="0.5"/>

  <!-- Step 1: AI Agent → Wallet: Sign transaction -->
  <line x1="100" y1="100" x2="245" y2="100" stroke="#0EA5E9" stroke-width="2"/>
  <polygon points="250,100 242,95 242,105" fill="#0EA5E9"/>
  <rect x="130" y="77" width="90" height="18" rx="4" fill="#0EA5E9" fill-opacity="0.2" stroke="#0EA5E9" stroke-width="1"/>
  <text x="175" y="89" text-anchor="middle" fill="#0EA5E9" font-family="system-ui, -apple-system, sans-serif" font-size="9">Sign transaction</text>

  <!-- Step 2: Wallet self-loop: ECDSA signature -->
  <path d="M 250 130 C 300 130, 300 170, 250 170" stroke="#8B5CF6" stroke-width="2" fill="none"/>
  <polygon points="250,170 258,165 258,175" fill="#8B5CF6"/>
  <rect x="295" y="140" width="95" height="18" rx="4" fill="#8B5CF6" fill-opacity="0.2" stroke="#8B5CF6" stroke-width="1"/>
  <text x="342" y="152" text-anchor="middle" fill="#8B5CF6" font-family="system-ui, -apple-system, sans-serif" font-size="9">ECDSA signature</text>

  <!-- Step 3: Wallet → AI Agent: Signed tx -->
  <line x1="250" y1="200" x2="105" y2="200" stroke="#8B5CF6" stroke-width="2"/>
  <polygon points="100,200 108,195 108,205" fill="#8B5CF6"/>
  <rect x="145" y="177" width="60" height="18" rx="4" fill="#8B5CF6" fill-opacity="0.2" stroke="#8B5CF6" stroke-width="1"/>
  <text x="175" y="189" text-anchor="middle" fill="#8B5CF6" font-family="system-ui, -apple-system, sans-serif" font-size="9">Signed tx</text>

  <!-- Step 4: AI Agent → Blockchain: Broadcast -->
  <line x1="100" y1="240" x2="445" y2="240" stroke="#0EA5E9" stroke-width="2"/>
  <polygon points="450,240 442,235 442,245" fill="#0EA5E9"/>
  <rect x="240" y="217" width="65" height="18" rx="4" fill="#0EA5E9" fill-opacity="0.2" stroke="#0EA5E9" stroke-width="1"/>
  <text x="272" y="229" text-anchor="middle" fill="#0EA5E9" font-family="system-ui, -apple-system, sans-serif" font-size="9">Broadcast</text>

  <!-- Step 5: Blockchain self-loop: Verify signature -->
  <path d="M 450 270 C 500 270, 500 310, 450 310" stroke="#F59E0B" stroke-width="2" fill="none"/>
  <polygon points="450,310 458,305 458,315" fill="#F59E0B"/>
  <rect x="495" y="280" width="90" height="18" rx="4" fill="#F59E0B" fill-opacity="0.2" stroke="#F59E0B" stroke-width="1"/>
  <text x="540" y="292" text-anchor="middle" fill="#F59E0B" font-family="system-ui, -apple-system, sans-serif" font-size="9">Verify signature</text>

  <!-- Step 6: Blockchain → ACTPKernel: Execute if valid -->
  <line x1="450" y1="340" x2="595" y2="340" stroke="#10B981" stroke-width="2"/>
  <polygon points="600,340 592,335 592,345" fill="#10B981"/>
  <rect x="480" y="317" width="90" height="18" rx="4" fill="#10B981" fill-opacity="0.2" stroke="#10B981" stroke-width="1"/>
  <text x="525" y="329" text-anchor="middle" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="9">Execute if valid</text>

  <!-- Note: msg.sender = agent address -->
  <rect x="380" y="365" width="140" height="30" rx="6" fill="#1F2937" stroke="#4B5563" stroke-width="1"/>
  <text x="450" y="384" text-anchor="middle" fill="#9CA3AF" font-family="monospace" font-size="10">msg.sender = agent</text>
  <line x1="450" y1="350" x2="450" y2="365" stroke="#4B5563" stroke-width="1" stroke-dasharray="4,4"/>
</svg>
