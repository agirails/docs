<svg viewBox="0 0 900 330" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
  <!-- Background -->
  <rect width="900" height="330" fill="#0A0A0A"/>

  <!-- Users Container -->
  <rect x="30" y="30" width="260" height="210" rx="12" fill="#0EA5E9" fill-opacity="0.08" stroke="#0EA5E9" stroke-width="2"/>
  <text x="160" y="55" text-anchor="middle" fill="#0EA5E9" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="700">Users</text>

  <!-- Requester -->
  <rect x="50" y="75" width="220" height="50" rx="8" fill="#0EA5E9" fill-opacity="0.2" stroke="#0EA5E9" stroke-width="1.5"/>
  <text x="160" y="95" text-anchor="middle" fill="#0EA5E9" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Requester</text>
  <text x="160" y="112" text-anchor="middle" fill="#7DD3FC" font-family="system-ui, -apple-system, sans-serif" font-size="9">creates &amp; funds</text>

  <!-- Provider -->
  <rect x="50" y="140" width="220" height="50" rx="8" fill="#F59E0B" fill-opacity="0.2" stroke="#F59E0B" stroke-width="1.5"/>
  <text x="160" y="160" text-anchor="middle" fill="#F59E0B" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600">Provider</text>
  <text x="160" y="177" text-anchor="middle" fill="#FCD34D" font-family="system-ui, -apple-system, sans-serif" font-size="9">delivers &amp; settles</text>

  <!-- ACTPKernel Container -->
  <rect x="320" y="30" width="260" height="210" rx="12" fill="#3B82F6" fill-opacity="0.08" stroke="#3B82F6" stroke-width="2"/>
  <text x="450" y="55" text-anchor="middle" fill="#3B82F6" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="700">ACTPKernel</text>
  <text x="450" y="72" text-anchor="middle" fill="#93C5FD" font-family="system-ui, -apple-system, sans-serif" font-size="10">(Coordinator)</text>

  <!-- Kernel Functions -->
  <rect x="340" y="85" width="220" height="28" rx="6" fill="#3B82F6" fill-opacity="0.2" stroke="#3B82F6" stroke-width="1"/>
  <text x="450" y="103" text-anchor="middle" fill="#93C5FD" font-family="monospace" font-size="10">createTransaction</text>

  <rect x="340" y="120" width="220" height="28" rx="6" fill="#3B82F6" fill-opacity="0.2" stroke="#3B82F6" stroke-width="1"/>
  <text x="450" y="138" text-anchor="middle" fill="#93C5FD" font-family="monospace" font-size="10">linkEscrow</text>

  <rect x="340" y="155" width="220" height="28" rx="6" fill="#3B82F6" fill-opacity="0.2" stroke="#3B82F6" stroke-width="1"/>
  <text x="450" y="173" text-anchor="middle" fill="#93C5FD" font-family="monospace" font-size="10">transitionState</text>

  <rect x="340" y="190" width="220" height="28" rx="6" fill="#3B82F6" fill-opacity="0.2" stroke="#3B82F6" stroke-width="1"/>
  <text x="450" y="208" text-anchor="middle" fill="#93C5FD" font-family="monospace" font-size="10">releaseEscrow</text>

  <!-- EscrowVault Container -->
  <rect x="610" y="30" width="260" height="210" rx="12" fill="#8B5CF6" fill-opacity="0.08" stroke="#8B5CF6" stroke-width="2"/>
  <text x="740" y="55" text-anchor="middle" fill="#8B5CF6" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="700">EscrowVault</text>
  <text x="740" y="72" text-anchor="middle" fill="#C4B5FD" font-family="system-ui, -apple-system, sans-serif" font-size="10">(Fund Manager)</text>

  <!-- Vault Functions -->
  <rect x="630" y="85" width="220" height="28" rx="6" fill="#8B5CF6" fill-opacity="0.2" stroke="#8B5CF6" stroke-width="1"/>
  <text x="740" y="103" text-anchor="middle" fill="#C4B5FD" font-family="monospace" font-size="10">createEscrow</text>

  <rect x="630" y="120" width="220" height="28" rx="6" fill="#8B5CF6" fill-opacity="0.2" stroke="#8B5CF6" stroke-width="1"/>
  <text x="740" y="138" text-anchor="middle" fill="#C4B5FD" font-family="monospace" font-size="10">payoutToProvider</text>

  <rect x="630" y="155" width="220" height="28" rx="6" fill="#8B5CF6" fill-opacity="0.2" stroke="#8B5CF6" stroke-width="1"/>
  <text x="740" y="173" text-anchor="middle" fill="#C4B5FD" font-family="monospace" font-size="10">refundToRequester</text>

  <rect x="630" y="190" width="220" height="28" rx="6" fill="#8B5CF6" fill-opacity="0.2" stroke="#8B5CF6" stroke-width="1"/>
  <text x="740" y="208" text-anchor="middle" fill="#C4B5FD" font-family="monospace" font-size="10">remaining</text>

  <!-- USDC Token Container (full width) -->
  <rect x="30" y="270" width="840" height="45" rx="12" fill="#10B981" fill-opacity="0.08" stroke="#10B981" stroke-width="2"/>
  <text x="450" y="298" text-anchor="middle" fill="#10B981" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="700">USDC</text>
  <text x="200" y="298" text-anchor="middle" fill="#6EE7B7" font-family="monospace" font-size="9">approve</text>
  <text x="700" y="298" text-anchor="middle" fill="#6EE7B7" font-family="monospace" font-size="9">transfer</text>

  <!-- Flow Arrows -->

  <!-- Users → ACTPKernel -->
  <line x1="290" y1="100" x2="312" y2="100" stroke="#0EA5E9" stroke-width="1.5"/>
  <polygon points="320,100 312,95 312,105" fill="#0EA5E9"/>

  <!-- ACTPKernel → EscrowVault -->
  <line x1="580" y1="100" x2="602" y2="100" stroke="#3B82F6" stroke-width="1.5"/>
  <polygon points="610,100 602,95 602,105" fill="#3B82F6"/>

  <!-- EscrowVault → USDC -->
  <line x1="740" y1="240" x2="740" y2="265" stroke="#8B5CF6" stroke-width="1.5"/>
  <polygon points="740,270 735,262 745,262" fill="#8B5CF6"/>

  <!-- Users → USDC (approve) -->
  <line x1="160" y1="240" x2="160" y2="265" stroke="#0EA5E9" stroke-width="1.5" stroke-dasharray="4,2"/>
  <polygon points="160,270 155,262 165,262" fill="#0EA5E9"/>
</svg>
